<div class="box box-primary">
    <div class="box-header with-border">
        <div class="row">
            <div class="col-md-8">
                <h1><span class="fa  fa-ellipsis-v"></span> Pago de Prestaciones Realizadas o multas revisadas</h1>
            </div>
            <div class="col-md-4">
                <button class="btn btn-block btn-danger" id="btnVolver"><i class="fa fa-share"></i> | Volver a Pago de ayudantes pendientes</button>
            </div>
        </div>
    </div>
    <div class="box-body">

        <table id="tabla" class="table table-striped table-bordered dt-responsive" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th class="all">Cod.Pago</th>
                    <th class="desktop">Fecha</th>
                    <th class="none">Usuario registrador</th>
                    <th class="all">Ayudante</th>
                    <th class="w3-green desktop"><i class="fa fa-usd"></i> Cumplido</th>
                    <th class="w3-green desktop"><i class="fa fa-usd"></i> Abandonado</th>
                    <th class="w3-red desktop"><i class="fa fa-usd"></i> Multa <br />Cobrada</th>
                    <th class="w3-blue desktop"><i class="fa fa-usd"></i> Total <br />Pagado</th>
                    <th class="w3-yellow desktop"><i class="fa fa-usd"></i> Multa <br /> perdonada</th>
                    <th class="all">Acciones</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>
<script>
    $(document).ready(function() {
    	$('#btnVolver').click(function(){
    		$.post('../ayudante/gestion_pago_ayudante', function(resp) {
                $('#contenedor').html(resp);
            });
    	});
        var tablaPagoPrestacion =$('#tabla').DataTable({
            dom: "<'row'<'col-sm-3'f><'col-sm-2'l><'col-sm-5'i>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",
            "ordering": false,
            "oLanguage": {
                "sUrl": "../../js/Spanish.lang"
            },
            "processing": true,
            "serverSide": true,
            "ajax": {
                "type": "POST",
                "url": "../pagoPrestacion/lista",
                "data": function(d) {
                    d.estado = true;
                }
            },
            "columnDefs":[
            	{className:"w3-right-align","targets":[4,5,6,7,8,9]},
            	{className:"w3-pale-green","targets":[4,5]},
            	{className:"w3-pale-red","targets":[6]},
            	{className:"w3-pale-blue ","targets":[7]},
            	{className:"w3-pale-yellow","targets":[7]},
            ],
            "columns": [{
                "data": "codPagoPrestacion"
            }, {
                "data": "fecha"
            }, {
                "data": "xusuario"
            }, {
                "data": "xayudante"
            }, {
            	"data": "totalCumplido"
            }, {
            	"data": "totalAbandonado"
            }, {
            	"data": "totalMultaCobrada"
            }, {
            	"data": "totalPagado"
            }, {
            	"data": "totalMultaPerdonada"
            }, {
                "data": "codPagoPrestacion"
            }],
            "createdRow": function(row, data, index) {
            	$('td', row).eq(4).addClass('w3-pale-green');
            	$('td', row).eq(5).addClass('w3-pale-green');
            	$('td', row).eq(6).addClass('w3-pale-red');
            	$('td', row).eq(7).addClass('w3-pale-blue');
            	$('td', row).eq(8).addClass('w3-pale-yellow');
                $('td', row).eq(9).html('<div class="btn-group-sm"><button class="btn btn-sm btn-success imprimir" title="Imprimir Pago de prestacion" ><i class="fa fa-print"><br>imprimir</i> </button></div>');
            },
            "drawCallback": function(settings) {
            	
                $('button[data-toggle="tooltip"]').tooltip({
                    animated: 'fade',
                    placement: 'bottom',
                });
                $('.imprimir').click(function() {
                	let obj = tablaPagoPrestacion.row($(this).closest('tr')).data();
                    $("#frameReportes").attr("src", "../pagoPrestacion/imprimir?codPagoPrestacion=" + obj.codPagoPrestacion);
                    $("#reportes").modal('show');
                });
            }
        });
    });
</script>